{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./node_modules/tslib/tslib.es6.js","webpack:///./node_modules/ndx/src/tokenizer.ts","webpack:///./node_modules/ndx/src/filters.ts","webpack:///./node_modules/ndx/src/inverted_index.ts","webpack:///./node_modules/ndx/src/document_index.ts","webpack:///./src/worker.ts"],"names":["installedModules","__webpack_require__","moduleId","exports","module","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","prototype","hasOwnProperty","p","s","__awaiter","thisArg","_arguments","P","generator","Promise","resolve","reject","fulfilled","step","next","e","rejected","result","done","then","apply","__generator","body","f","y","g","_","label","sent","trys","ops","verb","throw","return","iterator","this","v","op","TypeError","pop","length","push","setPrototypeOf","Array","assign","WHITESPACE_RE","whitespaceTokenizer","text","trim","split","NWSTART_RE","NWEND_RE","InvertedIndexNode","charCode","firstChild","firstPosting","createNodes","parent","term","start","newNode","charCodeAt","findChild","node","child","InvertedIndex","root","undefined","add","docDetails","termFrequency","nextNode","pointer","details","expandTerm","results","_expandTerm","String","fromCharCode","vacuum","_vacuum","prevPointer","removed","DEFAULT_FILTER","replace","trimNonWordCharactersFilter","toLowerCase","lowerCaseFilter","document_index_DocumentIndex","DocumentIndex","options","_documents","Map","_index","_fields","_tokenizer","_filter","_bm25k1","_bm25b","tokenizer","filter","bm25","k1","b","size","addField","fieldName","boost","sumLength","avgLength","documentId","document","_this","documentTermCounts","termCounts","fieldDetails","fieldAccessor","fieldValue","terms","filteredTermsCount","j","counts","fill","set","docId","fieldLengths","forEach","termCounters","remove","delete","fieldLength","field","search","query","queryTerms","scores","expandedTerms","documents","Set","eTerm","expansionBoost","Math","log","termNode","documentFrequency","idf","score","x","tf","avgFieldLength","prevScore","has","max","sort","a","queryToTerms","tokens","concat","emitStateChange","state","postMessage","type","db","comments","index","_i","comments_2","comment","_a","req","indexedDB","open","onerror","error","onsuccess","onupgradeneeded","objectStoreNames","contains","createObjectStore","autoIncrement","transaction","objectStore","count","queryCommentsCount","url","fetch","DATA_URL","json","map","id","author","fetchComments","oncomplete","commentsStore","comments_1","saveComments","cursor","openCursor","target","continue","loadComments","onmessage","data","slice","main"],"mappings":"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","file":"20fa8a724c4344169f4e.worker.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 0);\n","/*! *****************************************************************************\r\nCopyright (c) Microsoft Corporation. All rights reserved.\r\nLicensed under the Apache License, Version 2.0 (the \"License\"); you may not use\r\nthis file except in compliance with the License. You may obtain a copy of the\r\nLicense at http://www.apache.org/licenses/LICENSE-2.0\r\n\r\nTHIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\nKIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED\r\nWARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,\r\nMERCHANTABLITY OR NON-INFRINGEMENT.\r\n\r\nSee the Apache Version 2.0 License for specific language governing permissions\r\nand limitations under the License.\r\n***************************************************************************** */\r\n/* global Reflect, Promise */\r\n\r\nvar extendStatics = Object.setPrototypeOf ||\r\n    ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n    function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n\r\nexport function __extends(d, b) {\r\n    extendStatics(d, b);\r\n    function __() { this.constructor = d; }\r\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n}\r\n\r\nexport var __assign = Object.assign || function __assign(t) {\r\n    for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n        s = arguments[i];\r\n        for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\r\n    }\r\n    return t;\r\n}\r\n\r\nexport function __rest(s, e) {\r\n    var t = {};\r\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\r\n        t[p] = s[p];\r\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\r\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) if (e.indexOf(p[i]) < 0)\r\n            t[p[i]] = s[p[i]];\r\n    return t;\r\n}\r\n\r\nexport function __decorate(decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n}\r\n\r\nexport function __param(paramIndex, decorator) {\r\n    return function (target, key) { decorator(target, key, paramIndex); }\r\n}\r\n\r\nexport function __metadata(metadataKey, metadataValue) {\r\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(metadataKey, metadataValue);\r\n}\r\n\r\nexport function __awaiter(thisArg, _arguments, P, generator) {\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : new P(function (resolve) { resolve(result.value); }).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n}\r\n\r\nexport function __generator(thisArg, body) {\r\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\r\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\r\n    function verb(n) { return function (v) { return step([n, v]); }; }\r\n    function step(op) {\r\n        if (f) throw new TypeError(\"Generator is already executing.\");\r\n        while (_) try {\r\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\r\n            if (y = 0, t) op = [op[0] & 2, t.value];\r\n            switch (op[0]) {\r\n                case 0: case 1: t = op; break;\r\n                case 4: _.label++; return { value: op[1], done: false };\r\n                case 5: _.label++; y = op[1]; op = [0]; continue;\r\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\r\n                default:\r\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\r\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\r\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\r\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\r\n                    if (t[2]) _.ops.pop();\r\n                    _.trys.pop(); continue;\r\n            }\r\n            op = body.call(thisArg, _);\r\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\r\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\r\n    }\r\n}\r\n\r\nexport function __exportStar(m, exports) {\r\n    for (var p in m) if (!exports.hasOwnProperty(p)) exports[p] = m[p];\r\n}\r\n\r\nexport function __values(o) {\r\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator], i = 0;\r\n    if (m) return m.call(o);\r\n    return {\r\n        next: function () {\r\n            if (o && i >= o.length) o = void 0;\r\n            return { value: o && o[i++], done: !o };\r\n        }\r\n    };\r\n}\r\n\r\nexport function __read(o, n) {\r\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\r\n    if (!m) return o;\r\n    var i = m.call(o), r, ar = [], e;\r\n    try {\r\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\r\n    }\r\n    catch (error) { e = { error: error }; }\r\n    finally {\r\n        try {\r\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\r\n        }\r\n        finally { if (e) throw e.error; }\r\n    }\r\n    return ar;\r\n}\r\n\r\nexport function __spread() {\r\n    for (var ar = [], i = 0; i < arguments.length; i++)\r\n        ar = ar.concat(__read(arguments[i]));\r\n    return ar;\r\n}\r\n\r\nexport function __await(v) {\r\n    return this instanceof __await ? (this.v = v, this) : new __await(v);\r\n}\r\n\r\nexport function __asyncGenerator(thisArg, _arguments, generator) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var g = generator.apply(thisArg, _arguments || []), i, q = [];\r\n    return i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i;\r\n    function verb(n) { if (g[n]) i[n] = function (v) { return new Promise(function (a, b) { q.push([n, v, a, b]) > 1 || resume(n, v); }); }; }\r\n    function resume(n, v) { try { step(g[n](v)); } catch (e) { settle(q[0][3], e); } }\r\n    function step(r) { r.value instanceof __await ? Promise.resolve(r.value.v).then(fulfill, reject) : settle(q[0][2], r); }\r\n    function fulfill(value) { resume(\"next\", value); }\r\n    function reject(value) { resume(\"throw\", value); }\r\n    function settle(f, v) { if (f(v), q.shift(), q.length) resume(q[0][0], q[0][1]); }\r\n}\r\n\r\nexport function __asyncDelegator(o) {\r\n    var i, p;\r\n    return i = {}, verb(\"next\"), verb(\"throw\", function (e) { throw e; }), verb(\"return\"), i[Symbol.iterator] = function () { return this; }, i;\r\n    function verb(n, f) { i[n] = o[n] ? function (v) { return (p = !p) ? { value: __await(o[n](v)), done: n === \"return\" } : f ? f(v) : v; } : f; }\r\n}\r\n\r\nexport function __asyncValues(o) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var m = o[Symbol.asyncIterator], i;\r\n    return m ? m.call(o) : (o = typeof __values === \"function\" ? __values(o) : o[Symbol.iterator](), i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i);\r\n    function verb(n) { i[n] = o[n] && function (v) { return new Promise(function (resolve, reject) { v = o[n](v), settle(resolve, reject, v.done, v.value); }); }; }\r\n    function settle(resolve, reject, d, v) { Promise.resolve(v).then(function(v) { resolve({ value: v, done: d }); }, reject); }\r\n}\r\n\r\nexport function __makeTemplateObject(cooked, raw) {\r\n    if (Object.defineProperty) { Object.defineProperty(cooked, \"raw\", { value: raw }); } else { cooked.raw = raw; }\r\n    return cooked;\r\n};\r\n\r\nexport function __importStar(mod) {\r\n    if (mod && mod.__esModule) return mod;\r\n    var result = {};\r\n    if (mod != null) for (var k in mod) if (Object.hasOwnProperty.call(mod, k)) result[k] = mod[k];\r\n    result.default = mod;\r\n    return result;\r\n}\r\n\r\nexport function __importDefault(mod) {\r\n    return (mod && mod.__esModule) ? mod : { default: mod };\r\n}\r\n","const WHITESPACE_RE = /[\\s]+/;\n\n/**\n * The whitespace tokenizer breaks on whitespace - spaces, tabs, line feeds and assumes that contiguous nonwhitespace\n * characters form a single token.\n */\nexport function whitespaceTokenizer(text: string): string[] {\n  return text.trim().split(WHITESPACE_RE);\n}\n","\n/**\n * Converts term to lower case.\n */\nexport function lowerCaseFilter(term: string): string {\n  return term.toLowerCase();\n}\n\nconst NWSTART_RE = /^\\W+/;\nconst NWEND_RE = /\\W+$/;\n\n/**\n * Removes all non-word characters at the start and at the end of the term.\n */\nexport function trimNonWordCharactersFilter(term: string): string {\n  return term.replace(NWSTART_RE, \"\").replace(NWEND_RE, \"\");\n}\n","import { DocumentDetails } from \"./document\";\n\nexport interface DocumentPointer<I> {\n  next: DocumentPointer<I> | null;\n  readonly details: DocumentDetails<I>;\n  readonly termFrequency: number[];\n}\n\n/**\n * Trie Node.\n */\nexport class InvertedIndexNode<I> {\n  readonly charCode: number;\n  next: InvertedIndexNode<I> | null;\n  firstChild: InvertedIndexNode<I> | null;\n  firstPosting: DocumentPointer<I> | null;\n\n  constructor(charCode: number) {\n    this.charCode = charCode;\n    this.next = null;\n    this.firstChild = null;\n    this.firstPosting = null;\n  }\n}\n\n/**\n * Create trie nodes for the `term` starting from the `start` character.\n */\nfunction createNodes<I>(parent: InvertedIndexNode<I>, term: string, start: number): InvertedIndexNode<I> {\n  for (; start < term.length; start++) {\n    const newNode = new InvertedIndexNode<I>(term.charCodeAt(start));\n    if (parent.firstChild === null) {\n      parent.firstChild = newNode;\n    } else {\n      newNode.next = parent.firstChild;\n      parent.firstChild = newNode;\n    }\n    parent = newNode;\n  }\n  return parent;\n}\n\n/**\n * Find trie child node that matches `charCode`.\n */\nfunction findChild<I>(node: InvertedIndexNode<I>, charCode: number): InvertedIndexNode<I> | undefined {\n  let child = node.firstChild;\n  while (child !== null) {\n    if (child.charCode === charCode) {\n      return child;\n    }\n    child = child.next;\n  }\n  return undefined;\n}\n\n/**\n * Inverted Index implemented with a trie data structure.\n */\nexport class InvertedIndex<I> {\n  private readonly root: InvertedIndexNode<I>;\n\n  constructor() {\n    this.root = new InvertedIndexNode<I>(0);\n  }\n\n  /**\n   * Get trie node that matches the `term`.\n   */\n  get(term: string): InvertedIndexNode<I> | null {\n    let node: InvertedIndexNode<I> | undefined = this.root;\n\n    for (let i = 0; i < term.length; i++) {\n      node = findChild(node, term.charCodeAt(i));\n      if (node === undefined) {\n        return null;\n      }\n    }\n\n    return node;\n  }\n\n  add(term: string, docDetails: DocumentDetails<I>, termFrequency: number[]): void {\n    let node = this.root;\n\n    for (let i = 0; i < term.length; i++) {\n      if (node.firstChild === null) {\n        node = createNodes(node, term, i);\n        break;\n      }\n      const nextNode = findChild(node, term.charCodeAt(i));\n      if (nextNode === undefined) {\n        node = createNodes(node, term, i);\n        break;\n      }\n      node = nextNode;\n    }\n\n    const pointer = {\n      next: null,\n      details: docDetails,\n      termFrequency: termFrequency,\n    } as DocumentPointer<I>;\n\n    if (node.firstPosting === null) {\n      node.firstPosting = pointer;\n    } else {\n      pointer.next = node.firstPosting;\n      node.firstPosting = pointer;\n    }\n  }\n\n  /**\n   * Expand term with all indexed terms.\n   */\n  expandTerm(term: string): string[] {\n    const node = this.get(term);\n    const results = [] as string[];\n    if (node !== null) {\n      _expandTerm(node, results, term);\n    }\n\n    return results;\n  }\n\n  /**\n   * Remove outdated/removed documents from the index.\n   */\n  vacuum(): void {\n    _vacuum(this.root);\n  }\n}\n\nfunction _expandTerm<I>(node: InvertedIndexNode<I>, results: string[], term: string): void {\n  if (node.firstPosting !== null && node.firstPosting !== null) {\n    results.push(term);\n  }\n  let child = node.firstChild;\n  while (child !== null) {\n    _expandTerm(child, results, term + String.fromCharCode(child.charCode));\n    child = child.next;\n  }\n}\n\nfunction _vacuum<I>(node: InvertedIndexNode<I>): void {\n  let prevPointer: DocumentPointer<I> | null = null;\n  let pointer = node.firstPosting;\n  while (pointer !== null) {\n    if (pointer.details.removed) {\n      if (prevPointer === null) {\n        node.firstPosting = pointer.next;\n      } else {\n        prevPointer.next = pointer.next;\n      }\n    } else {\n      prevPointer = pointer;\n    }\n    pointer = pointer.next;\n  }\n\n  let child = node.firstChild;\n  while (child !== null) {\n    _vacuum(child);\n    child = child.next;\n  }\n}\n","import { DocumentDetails } from \"./document\";\nimport { InvertedIndex, DocumentPointer } from \"./inverted_index\";\nimport { whitespaceTokenizer } from \"./tokenizer\";\nimport { lowerCaseFilter, trimNonWordCharactersFilter } from \"./filters\";\n\n/**\n * BM25 Ranking function constants.\n */\nexport interface BM25Options {\n  /**\n   * Controls non-linear term frequency normalization (saturation).\n   *\n   * Default value: 1.2\n   */\n  readonly k1?: number;\n\n  /**\n   * Controls to what degree document length normalizes tf values.\n   *\n   * Default value: 0.75\n   */\n  readonly b?: number;\n}\n\n/**\n * Document Index options.\n */\nexport interface DocumentIndexOptions {\n  /**\n   * Tokenizer is a function that breaks a text into words, phrases, symbols, or other meaningful elements called\n   * tokens.\n   *\n   * Default tokenizer breaks words on spaces, tabs, line feeds and assumes that contiguous nonwhitespace characters\n   * form a single token.\n   */\n  readonly tokenizer?: (query: string) => string[];\n  /**\n   * Filter is a function that processes tokens and returns terms, terms are used in Inverted Index to index documents.\n   *\n   * Default filter transforms all characters to lower case and removes all non-word characters at the beginning and\n   * the end of a term.\n   */\n  readonly filter?: (term: string) => string;\n  /**\n   * BM25 Ranking function constants.\n   */\n  readonly bm25?: BM25Options;\n}\n\n/**\n * Field Options.\n */\nexport interface FieldOptions<D> {\n  /**\n   * Getter is a function that will be used to get value for this field. If getter function isn't specified, field name\n   * will be used to get value.\n   */\n  readonly getter?: (document: D) => string;\n  /**\n   * Score boosting factor.\n   */\n  readonly boost?: number;\n}\n\n/**\n * Search Result.\n */\nexport interface SearchResult<I> {\n  readonly docId: I;\n  score: number;\n}\n\n/**\n * Field Details.\n */\ninterface FieldDetails<D> {\n  /**\n   * Field name.\n   */\n  readonly name: string;\n  /**\n   * Getter is a function that will be used to get value for this field. If getter function isn't specified, field name\n   * will be used to get value.\n   */\n  readonly getter: ((document: D) => string) | string;\n  /**\n   * Score boosting factor.\n   */\n  readonly boost: number;\n  /**\n   * Sum of field lengths in all documents.\n   */\n  sumLength: number;\n  /**\n   * Average of field lengths in all documents.\n   */\n  avgLength: number;\n}\n\nexport function DEFAULT_FILTER(term: string): string {\n  return trimNonWordCharactersFilter(lowerCaseFilter(term));\n}\n\n/**\n * Document Index.\n */\nexport class DocumentIndex<I, D> {\n  private readonly _documents: Map<I, DocumentDetails<I>>;\n  private readonly _index: InvertedIndex<I>;\n  private readonly _fields: FieldDetails<D>[];\n  private readonly _tokenizer: (text: string) => string[];\n  private readonly _filter: (term: string) => string;\n  private readonly _bm25k1: number;\n  private readonly _bm25b: number;\n\n  constructor(options?: DocumentIndexOptions) {\n    this._documents = new Map();\n    this._index = new InvertedIndex<I>();\n    this._fields = [];\n    this._tokenizer = whitespaceTokenizer;\n    this._filter = DEFAULT_FILTER;\n    this._bm25k1 = 1.2;\n    this._bm25b = 0.75;\n\n    if (options !== undefined) {\n      if (options.tokenizer !== undefined) {\n        this._tokenizer = options.tokenizer;\n      }\n      if (options.filter !== undefined) {\n        this._filter = options.filter;\n      }\n      const bm25 = options.bm25;\n      if (bm25 !== undefined) {\n        if (bm25.k1 !== undefined) {\n          this._bm25k1 = bm25.k1;\n        }\n        if (bm25.b !== undefined) {\n          this._bm25b = bm25.b;\n        }\n      }\n    }\n  }\n\n  /**\n   * Returns number of indexed document.\n   */\n  get size(): number {\n    return this._documents.size;\n  }\n\n  /**\n   * Create Field Index.\n   */\n  addField(fieldName: string, options?: FieldOptions<D>): void {\n    let getter: ((document: D) => string) | string = fieldName;\n    let boost = 1;\n    if (options !== undefined) {\n      if (options.getter !== undefined) {\n        getter = options.getter;\n      }\n      if (options.boost !== undefined) {\n        boost = options.boost;\n      }\n    }\n\n    const details: FieldDetails<D> = {\n      name: fieldName,\n      getter: getter,\n      boost: boost,\n      sumLength: 0,\n      avgLength: 0,\n    };\n\n    this._fields.push(details);\n  }\n\n  /**\n   * Add document to the index.\n   */\n  add(documentId: I, document: D): void {\n    const documentTermCounts = new Array<number>(this._fields.length);\n    const termCounts = new Map<string, number[]>();\n\n    for (let i = 0; i < this._fields.length; i++) {\n      const fieldDetails = this._fields[i];\n      const fieldAccessor = fieldDetails.getter;\n      const fieldValue = typeof fieldAccessor === \"string\" ?\n        (document as any as { [key: string]: string })[fieldAccessor] :\n        fieldAccessor(document);\n\n      if (fieldValue === undefined) {\n        documentTermCounts[i] = 0;\n      } else {\n        // tokenize text\n        const terms = this._tokenizer(fieldValue);\n\n        // filter and count terms, ignore empty strings\n        let filteredTermsCount = 0;\n        for (let j = 0; j < terms.length; j++) {\n          const term = this._filter(terms[j]);\n          if (term !== \"\") {\n            filteredTermsCount++;\n            let counts = termCounts.get(term);\n            if (counts === undefined) {\n              counts = new Array<number>(this._fields.length).fill(0);\n              termCounts.set(term, counts);\n            }\n            counts[i] += 1;\n          }\n        }\n\n        fieldDetails.sumLength += filteredTermsCount;\n        fieldDetails.avgLength = fieldDetails.sumLength / (this._documents.size + 1);\n        documentTermCounts[i] = filteredTermsCount;\n      }\n    }\n\n    const docDetails: DocumentDetails<I> = {\n      docId: documentId,\n      removed: false,\n      fieldLengths: documentTermCounts,\n    };\n\n    this._documents.set(documentId, docDetails);\n    termCounts.forEach((termCounters, term) => {\n      this._index.add(term, docDetails, termCounters);\n    });\n  }\n\n  /**\n   * Remove document from the index.\n   */\n  remove(documentId: I): void {\n    const details = this._documents.get(documentId);\n    if (details !== undefined) {\n      details.removed = true;\n      this._documents.delete(documentId);\n      for (let i = 0; i < this._fields.length; i++) {\n        const fieldLength = details.fieldLengths[i];\n        if (fieldLength > 0) {\n          const field = this._fields[i];\n          field.sumLength -= fieldLength;\n          field.avgLength = field.sumLength / this._documents.size;\n        }\n      }\n    }\n  }\n\n  /**\n   * Search with a free text query.\n   *\n   * All token separators work as a disjunction operator.\n   */\n  search(query: string): SearchResult<I>[] {\n    const queryTerms = this._tokenizer(query);\n\n    const scores = new Map<I, number>();\n\n    for (let i = 0; i < queryTerms.length; i++) {\n      const term = this._filter(queryTerms[i]);\n      if (term !== \"\") {\n        const expandedTerms = this._index.expandTerm(term);\n        const documents = new Set<I>();\n        for (let j = 0; j < expandedTerms.length; j++) {\n          const eTerm = expandedTerms[j];\n          const expansionBoost = eTerm === term ? 1 : Math.log(1 + (1 / (1 + eTerm.length - term.length)));\n          const termNode = this._index.get(eTerm);\n\n          if (termNode !== null && termNode.firstPosting !== null) {\n            let documentFrequency = 0;\n            let pointer: DocumentPointer<I> | null = termNode.firstPosting;\n            let prevPointer: DocumentPointer<I> | null = null;\n\n            while (pointer !== null) {\n              if (pointer.details.removed) {\n                if (prevPointer === null) {\n                  termNode.firstPosting = pointer.next;\n                } else {\n                  prevPointer.next = pointer.next;\n                }\n              } else {\n                prevPointer = pointer;\n                documentFrequency++;\n              }\n              pointer = pointer.next;\n            }\n\n            if (documentFrequency > 0) {\n              // calculating BM25 idf\n              const idf = Math.log(1 + (this.size - documentFrequency + 0.5) / (documentFrequency + 0.5));\n\n              pointer = termNode.firstPosting;\n              while (pointer !== null) {\n                if (!pointer.details.removed) {\n                  let score = 0;\n                  for (let x = 0; x < pointer.details.fieldLengths.length; x++) {\n                    let tf = pointer.termFrequency[x];\n                    if (tf > 0) {\n                      // calculating BM25 tf\n                      const fieldLength = pointer.details.fieldLengths[x];\n                      const fieldDetails = this._fields[x];\n                      const avgFieldLength = fieldDetails.avgLength;\n                      const k1 = this._bm25k1;\n                      const b = this._bm25b;\n                      tf = ((k1 + 1) * tf) / (k1 * ((1 - b) + b * (fieldLength / avgFieldLength)) + tf);\n                      score += tf * idf * fieldDetails.boost * expansionBoost;\n                    }\n                  }\n                  if (score > 0) {\n                    const docId = pointer.details.docId;\n                    const prevScore = scores.get(docId);\n                    if (prevScore !== undefined && documents.has(docId)) {\n                      scores.set(docId, Math.max(prevScore, score));\n                    } else {\n                      scores.set(docId, prevScore === undefined ? score : prevScore + score);\n                    }\n                    documents.add(docId);\n                  }\n                }\n                pointer = pointer.next;\n              }\n            }\n          }\n        }\n      }\n    }\n\n    const result = [] as SearchResult<I>[];\n    scores.forEach(function (score, documentId) {\n      result.push({\n        docId: documentId,\n        score: score,\n      });\n    });\n    result.sort(function (a, b) {\n      return b.score - a.score;\n    });\n\n    return result;\n  }\n\n  /**\n   * Expand term with all possible combinations.\n   */\n  expandTerm(term: string): string[] {\n    return this._index.expandTerm(term);\n  }\n\n  /**\n   * Convert query to an array of terms.\n   */\n  queryToTerms(query: string): string[] {\n    let result = [] as string[];\n    const tokens = this._tokenizer(query);\n    for (let i = 0; i < tokens.length; i++) {\n      const term = this._filter(tokens[i]);\n      if (term !== \"\") {\n        result = result.concat(this._index.expandTerm(term));\n      }\n    }\n\n    return result;\n  }\n\n  /**\n   * Remove outdated/removed documents from the index.\n   */\n  vacuum(): void {\n    this._index.vacuum();\n  }\n}\n","import * as tslib_1 from \"tslib\";\nimport { DocumentIndex } from \"ndx\";\nvar DB_NAME = \"docs\";\nvar DB_VERSION = 1;\nvar DATA_URL = \"data/reddit_comments.json\";\nfunction emitStateChange(state) {\n    postMessage({ type: \"state\", state: state });\n}\nfunction emitResults(id, results) {\n    postMessage({ type: \"query\", id: id, results: results });\n}\nfunction fetchComments(url) {\n    return tslib_1.__awaiter(this, void 0, void 0, function () {\n        var data, raw;\n        return tslib_1.__generator(this, function (_a) {\n            switch (_a.label) {\n                case 0: return [4 /*yield*/, fetch(url)];\n                case 1:\n                    data = _a.sent();\n                    return [4 /*yield*/, data.json()];\n                case 2:\n                    raw = _a.sent();\n                    return [2 /*return*/, raw.map(function (d, i) { return ({ id: i, author: d.author, body: d.body }); })];\n            }\n        });\n    });\n}\nfunction openDB(dbName, dbVersion) {\n    return new Promise(function (resolve, reject) {\n        var req = indexedDB.open(dbName, dbVersion);\n        req.onerror = function (e) { reject(req.error); };\n        req.onsuccess = function (e) { resolve(req.result); };\n        req.onupgradeneeded = function (e) {\n            var db = req.result;\n            if (!db.objectStoreNames.contains(\"comments\")) {\n                db.createObjectStore(\"comments\", { autoIncrement: true });\n            }\n        };\n    });\n}\nfunction queryCommentsCount(db) {\n    return new Promise(function (resolve, reject) {\n        var comments = db.transaction(\"comments\").objectStore(\"comments\");\n        var req = comments.count();\n        req.onerror = function (e) { reject(req.error); };\n        req.onsuccess = function (e) { resolve(req.result); };\n    });\n}\nfunction saveComments(db, comments) {\n    return new Promise(function (resolve, reject) {\n        var transaction = db.transaction(\"comments\", \"readwrite\");\n        transaction.onerror = function (e) { reject(transaction.error); };\n        transaction.oncomplete = function (e) { resolve(); };\n        var commentsStore = transaction.objectStore(\"comments\");\n        for (var _i = 0, comments_1 = comments; _i < comments_1.length; _i++) {\n            var comment = comments_1[_i];\n            commentsStore.add(comment);\n        }\n    });\n}\nfunction loadComments(db) {\n    return new Promise(function (resolve, reject) {\n        var result = [];\n        var commentsStore = db.transaction(\"comments\").objectStore(\"comments\");\n        var cursor = commentsStore.openCursor();\n        cursor.onerror = function (e) { reject(cursor.error); };\n        cursor.onsuccess = function (e) {\n            var cursor = e.target.result;\n            if (cursor) {\n                result.push(cursor.value);\n                cursor.continue();\n            }\n            else {\n                resolve(result);\n            }\n        };\n    });\n}\nfunction main() {\n    return tslib_1.__awaiter(this, void 0, void 0, function () {\n        var db, commentsCount, comments, index, _i, comments_2, comment;\n        return tslib_1.__generator(this, function (_a) {\n            switch (_a.label) {\n                case 0:\n                    emitStateChange(1 /* Started */);\n                    return [4 /*yield*/, openDB(DB_NAME, DB_VERSION)];\n                case 1:\n                    db = _a.sent();\n                    emitStateChange(2 /* LoadingData */);\n                    return [4 /*yield*/, queryCommentsCount(db)];\n                case 2:\n                    commentsCount = _a.sent();\n                    if (!(commentsCount === 0)) return [3 /*break*/, 4];\n                    return [4 /*yield*/, fetchComments(DATA_URL)];\n                case 3:\n                    comments = _a.sent();\n                    emitStateChange(3 /* SavingData */);\n                    saveComments(db, comments);\n                    return [3 /*break*/, 6];\n                case 4: return [4 /*yield*/, loadComments(db)];\n                case 5:\n                    comments = _a.sent();\n                    _a.label = 6;\n                case 6:\n                    emitStateChange(4 /* IndexingData */);\n                    index = new DocumentIndex();\n                    index.addField(\"author\");\n                    index.addField(\"body\");\n                    for (_i = 0, comments_2 = comments; _i < comments_2.length; _i++) {\n                        comment = comments_2[_i];\n                        index.add(comment.id, comment);\n                    }\n                    emitStateChange(5 /* Ready */);\n                    onmessage = function (e) {\n                        var req = e.data;\n                        switch (req.type) {\n                            case \"query\": {\n                                emitResults(req.id, index.search(req.query).slice(0, 50).map(function (r) { return ({ comment: comments[r.docId], score: r.score }); }));\n                                break;\n                            }\n                        }\n                    };\n                    return [2 /*return*/];\n            }\n        });\n    });\n}\nmain();\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoid29ya2VyLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vc3JjL3dvcmtlci50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiO0FBQ0EsT0FBTyxFQUFFLGFBQWEsRUFBRSxNQUFNLEtBQUssQ0FBQztBQUVwQyxJQUFNLE9BQU8sR0FBRyxNQUFNLENBQUM7QUFDdkIsSUFBTSxVQUFVLEdBQUcsQ0FBQyxDQUFDO0FBQ3JCLElBQU0sUUFBUSxHQUFHLDJCQUEyQixDQUFDO0FBRTdDLHlCQUF5QixLQUFrQjtJQUN6QyxXQUFXLENBQUMsRUFBRSxJQUFJLEVBQUUsT0FBTyxFQUFFLEtBQUssT0FBQSxFQUFFLENBQUMsQ0FBQztBQUN4QyxDQUFDO0FBRUQscUJBQXFCLEVBQVUsRUFBRSxPQUF1QjtJQUN0RCxXQUFXLENBQUMsRUFBRSxJQUFJLEVBQUUsT0FBTyxFQUFFLEVBQUUsSUFBQSxFQUFFLE9BQU8sU0FBQSxFQUFFLENBQUMsQ0FBQztBQUM5QyxDQUFDO0FBRUQsdUJBQTZCLEdBQVc7Ozs7O3dCQUN6QixxQkFBTSxLQUFLLENBQUMsR0FBRyxDQUFDLEVBQUE7O29CQUF2QixJQUFJLEdBQUcsU0FBZ0I7b0JBQ2pCLHFCQUFNLElBQUksQ0FBQyxJQUFJLEVBQUUsRUFBQTs7b0JBQXZCLEdBQUcsR0FBRyxTQUFvQztvQkFDaEQsc0JBQU8sR0FBRyxDQUFDLEdBQUcsQ0FBQyxVQUFDLENBQUMsRUFBRSxDQUFDLElBQUssT0FBQSxDQUFDLEVBQUUsRUFBRSxFQUFFLENBQUMsRUFBRSxNQUFNLEVBQUUsQ0FBQyxDQUFDLE1BQU0sRUFBRSxJQUFJLEVBQUUsQ0FBQyxDQUFDLElBQUksRUFBRSxDQUFDLEVBQTNDLENBQTJDLENBQUMsRUFBQzs7OztDQUN2RTtBQUVELGdCQUFnQixNQUFjLEVBQUUsU0FBaUI7SUFDL0MsT0FBTyxJQUFJLE9BQU8sQ0FBQyxVQUFDLE9BQU8sRUFBRSxNQUFNO1FBQ2pDLElBQU0sR0FBRyxHQUFHLFNBQVMsQ0FBQyxJQUFJLENB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"],"sourceRoot":""}